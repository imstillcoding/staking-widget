import e from"@web3-onboard/core";import t from"@web3-onboard/injected-wallets";import n from"@web3-onboard/walletconnect";import{ethers as r}from"ethers";function o(e){return Object.keys(e).reduce(((t,n)=>{const r=e[n];var o;return t[n]=Object.assign({},r),i(r.value)&&(o=r.value,"[object Function]"!==Object.prototype.toString.call(o))&&!Array.isArray(r.value)&&(t[n].value=Object.assign({},r.value)),Array.isArray(r.value)&&(t[n].value=r.value.slice(0)),t}),{})}function l(e){if(e)try{return JSON.parse(e)}catch(t){return e}}function s(e,t,n){if(null==n||!1===n)return e.removeAttribute(t);let r=JSON.stringify(n);e.__updating[t]=!0,"true"===r&&(r=""),e.setAttribute(t,r),Promise.resolve().then((()=>delete e.__updating[t]))}function i(e){return null!=e&&("object"==typeof e||"function"==typeof e)}let a;function c(e,t){const n=Object.keys(t);return class extends e{static get observedAttributes(){return n.map((e=>t[e].attribute))}constructor(){super(),this.__initialized=!1,this.__released=!1,this.__releaseCallbacks=[],this.__propertyChangedCallbacks=[],this.__updating={},this.props={}}connectedCallback(){if(this.__initialized)return;this.__releaseCallbacks=[],this.__propertyChangedCallbacks=[],this.__updating={},this.props=function(e,t){const n=o(t);return Object.keys(t).forEach((t=>{const r=n[t],o=e.getAttribute(r.attribute),i=e[t];o&&(r.value=r.parse?l(o):o),null!=i&&(r.value=Array.isArray(i)?i.slice(0):i),r.reflect&&s(e,r.attribute,r.value),Object.defineProperty(e,t,{get:()=>r.value,set(e){const n=r.value;r.value=e,r.reflect&&s(this,r.attribute,r.value);for(let r=0,o=this.__propertyChangedCallbacks.length;r<o;r++)this.__propertyChangedCallbacks[r](t,e,n)},enumerable:!0,configurable:!0})})),n}(this,t);const e=function(e){return Object.keys(e).reduce(((t,n)=>(t[n]=e[n].value,t)),{})}(this.props),n=this.Component,r=a;try{a=this,this.__initialized=!0,"function"==typeof(i=n)&&0===i.toString().indexOf("class")?new n(e,{element:this}):n(e,{element:this})}finally{a=r}var i}async disconnectedCallback(){if(await Promise.resolve(),this.isConnected)return;this.__propertyChangedCallbacks.length=0;let e=null;for(;e=this.__releaseCallbacks.pop();)e(this);delete this.__initialized,this.__released=!0}attributeChangedCallback(e,n,r){if(this.__initialized&&!this.__updating[e]&&(e=this.lookupProp(e))in t){if(null==r&&!this[e])return;this[e]=t[e].parse?l(r):r}}lookupProp(e){if(t)return n.find((n=>e===n||e===t[n].attribute))}get renderRoot(){return this.shadowRoot||this.attachShadow({mode:"open"})}addReleaseCallback(e){this.__releaseCallbacks.push(e)}addPropertyChangedCallback(e){this.__propertyChangedCallbacks.push(e)}}}function u(e,t={},n={}){const{BaseElement:r=HTMLElement,extension:o}=n;return n=>{if(!e)throw new Error("tag is required to register a Component");let l=customElements.get(e);return l?(l.prototype.Component=n,l):(l=c(r,function(e){return e?Object.keys(e).reduce(((t,n)=>{const r=e[n];return t[n]=i(r)&&"value"in r?r:{value:r},t[n].attribute||(t[n].attribute=n.replace(/\.?([A-Z]+)/g,((e,t)=>"-"+t.toLowerCase())).replace("_","-").replace(/^-/,"")),t[n].parse="parse"in t[n]?t[n].parse:"string"!=typeof t[n].value,t}),{}):{}}(t)),l.prototype.Component=n,l.prototype.registeredTag=e,customElements.define(e,l,o),l)}}const d={};const f=Symbol("solid-proxy"),v=Symbol("solid-track"),g={equals:(e,t)=>e===t};let p=F;const b={owned:null,cleanups:null,context:null,owner:null},h={};var y=null;let k=null,x=null,m=null,w=0;function C(e,t){const n=k,r=y,o=0===e.length,l=o?b:{owned:null,cleanups:null,context:null,owner:t||r},s=o?e:()=>e((()=>N((()=>q(l)))));y=l,k=null;try{return K(s,!0)}finally{k=n,y=r}}function S(e,t){const n={value:e,observers:null,observerSlots:null,comparator:(t=t?Object.assign({},g,t):g).equals||void 0};return[D.bind(n),e=>("function"==typeof e&&(e=e(n.value)),O(n,e))]}function _(e,t,n){j(P(e,t,!0,1))}function A(e,t,n){j(P(e,t,!1,1))}function $(e,t,n){p=U;const r=P(e,t,!1,1);r.user=!0,m?m.push(r):j(r)}function E(e,t,n){n=n?Object.assign({},g,n):g;const r=P(e,t,!0,0);return r.observers=null,r.observerSlots=null,r.comparator=n.equals||void 0,j(r),D.bind(r)}function N(e){let t,n=k;return k=null,t=e(),k=n,t}function T(e){return null===y||(null===y.cleanups?y.cleanups=[e]:y.cleanups.push(e)),e}function D(){if(this.sources&&this.state)if(1===this.state)j(this);else{const e=x;x=null,K((()=>L(this)),!1),x=e}if(k){const e=this.observers?this.observers.length:0;k.sources?(k.sources.push(this),k.sourceSlots.push(e)):(k.sources=[this],k.sourceSlots=[e]),this.observers?(this.observers.push(k),this.observerSlots.push(k.sources.length-1)):(this.observers=[k],this.observerSlots=[k.sources.length-1])}return this.value}function O(e,t,n){let r=e.value;return e.comparator&&e.comparator(r,t)||(e.value=t,e.observers&&e.observers.length&&K((()=>{for(let t=0;t<e.observers.length;t+=1){const n=e.observers[t],r=null;r&&null.disposed.has(n),(r&&!n.tState||!r&&!n.state)&&(n.pure?x.push(n):m.push(n),n.observers&&R(n)),r||(n.state=1)}if(x.length>1e6)throw x=[],new Error}),!1)),t}function j(e){if(!e.fn)return;q(e);const t=y,n=k,r=w;k=y=e,function(e,t,n){let r;try{r=e.fn(t)}catch(t){e.pure&&(e.state=1),Z(t)}(!e.updatedAt||e.updatedAt<=n)&&(null!=e.updatedAt&&"observers"in e?O(e,r):e.value=r,e.updatedAt=n)}(e,e.value,r),k=n,y=t}function P(e,t,n,r=1,o){const l={fn:e,state:r,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:y,context:null,pure:n};return null===y||y!==b&&(y.owned?y.owned.push(l):y.owned=[l]),l}function B(e){if(0===e.state)return;if(2===e.state)return L(e);if(e.suspense&&N(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<w);)e.state&&t.push(e);for(let n=t.length-1;n>=0;n--)if(1===(e=t[n]).state)j(e);else if(2===e.state){const n=x;x=null,K((()=>L(e,t[0])),!1),x=n}}function K(e,t){if(x)return e();let n=!1;t||(x=[]),m?n=!0:m=[],w++;try{const t=e();return function(e){x&&(F(x),x=null);if(e)return;const t=m;m=null,t.length&&K((()=>p(t)),!1)}(n),t}catch(e){x||(m=null),Z(e)}}function F(e){for(let t=0;t<e.length;t++)B(e[t])}function U(e){let t,n=0;for(t=0;t<e.length;t++){const r=e[t];r.user?e[n++]=r:B(r)}var r;for(d.context&&(d.context=r),t=0;t<n;t++)B(e[t])}function L(e,t){e.state=0;for(let n=0;n<e.sources.length;n+=1){const r=e.sources[n];r.sources&&(1===r.state?r!==t&&B(r):2===r.state&&L(r,t))}}function R(e){for(let t=0;t<e.observers.length;t+=1){const n=e.observers[t];n.state||(n.state=2,n.pure?x.push(n):m.push(n),n.observers&&R(n))}}function q(e){let t;if(e.sources)for(;e.sources.length;){const t=e.sources.pop(),n=e.sourceSlots.pop(),r=t.observers;if(r&&r.length){const e=r.pop(),o=t.observerSlots.pop();n<r.length&&(e.sourceSlots[o]=n,r[n]=e,t.observerSlots[n]=o)}}if(e.owned){for(t=0;t<e.owned.length;t++)q(e.owned[t]);e.owned=null}if(e.cleanups){for(t=0;t<e.cleanups.length;t++)e.cleanups[t]();e.cleanups=null}e.state=0,e.context=null}function M(e){return e instanceof Error||"string"==typeof e?e:new Error("Unknown error")}function Z(e){throw e=M(e)}const I=Symbol("fallback");function W(e){for(let t=0;t<e.length;t++)e[t]()}function z(e,t){return N((()=>e(t||{})))}function G(){return!0}const H={get:(e,t,n)=>t===f?n:e.get(t),has:(e,t)=>e.has(t),set:G,deleteProperty:G,getOwnPropertyDescriptor:(e,t)=>({configurable:!0,enumerable:!0,get:()=>e.get(t),set:G,deleteProperty:G}),ownKeys:e=>e.keys()};function V(e){return null==(e="function"==typeof e?e():e)?{}:e}function J(...e){return new Proxy({get(t){for(let n=e.length-1;n>=0;n--){const r=V(e[n])[t];if(void 0!==r)return r}},has(t){for(let n=e.length-1;n>=0;n--)if(t in V(e[n]))return!0;return!1},keys(){const t=[];for(let n=0;n<e.length;n++)t.push(...Object.keys(V(e[n])));return[...new Set(t)]}},H)}function X(e){const t="fallback"in e&&{fallback:()=>e.fallback};return E(function(e,t,n={}){let r=[],o=[],l=[],s=0,i=t.length>1?[]:null;return T((()=>W(l))),()=>{let a,c,u=e()||[];return u[v],N((()=>{let e,t,f,v,g,p,b,h,y,k=u.length;if(0===k)0!==s&&(W(l),l=[],r=[],o=[],s=0,i&&(i=[])),n.fallback&&(r=[I],o[0]=C((e=>(l[0]=e,n.fallback()))),s=1);else if(0===s){for(o=new Array(k),c=0;c<k;c++)r[c]=u[c],o[c]=C(d);s=k}else{for(f=new Array(k),v=new Array(k),i&&(g=new Array(k)),p=0,b=Math.min(s,k);p<b&&r[p]===u[p];p++);for(b=s-1,h=k-1;b>=p&&h>=p&&r[b]===u[h];b--,h--)f[h]=o[b],v[h]=l[b],i&&(g[h]=i[b]);for(e=new Map,t=new Array(h+1),c=h;c>=p;c--)y=u[c],a=e.get(y),t[c]=void 0===a?-1:a,e.set(y,c);for(a=p;a<=b;a++)y=r[a],c=e.get(y),void 0!==c&&-1!==c?(f[c]=o[a],v[c]=l[a],i&&(g[c]=i[a]),c=t[c],e.set(y,c)):l[a]();for(c=p;c<k;c++)c in f?(o[c]=f[c],l[c]=v[c],i&&(i[c]=g[c],i[c](c))):o[c]=C(d);o=o.slice(0,s=k),r=u.slice(0)}return o}));function d(e){if(l[c]=e,i){const[e,n]=S(c);return i[c]=n,t(u[c],e)}return t(u[c])}}}((()=>e.each),e.children,t||void 0))}function Y(e){let t=!1;const n=e.keyed,r=E((()=>e.when),void 0,{equals:(e,n)=>t?e===n:!e==!n});return E((()=>{const o=r();if(o){const r=e.children,l="function"==typeof r&&r.length>0;return t=n||l,l?N((()=>r(o))):r}return e.fallback}))}function Q(e,t,n){const r=document.createElement("template");r.innerHTML=e;let o=r.content.firstChild;return n&&(o=o.firstChild),o}function ee(e,t,n){null==n?e.removeAttribute(t):e.setAttribute(t,n)}function te(e,t){null==t?e.removeAttribute("class"):e.className=t}function ne(e,t,n){if(!t)return n?ee(e,"style"):t;const r=e.style;if("string"==typeof t)return r.cssText=t;let o,l;for(l in"string"==typeof n&&(r.cssText=n=void 0),n||(n={}),t||(t={}),n)null==t[l]&&r.removeProperty(l),delete n[l];for(l in t)o=t[l],o!==n[l]&&(r.setProperty(l,o),n[l]=o);return n}function re(e,t,n,r){if(void 0===n||r||(r=[]),"function"!=typeof t)return le(e,t,r,n);A((r=>le(e,t(),r,n)),r)}function oe(e){const t=`$$${e.type}`;let n=e.composedPath&&e.composedPath()[0]||e.target;for(e.target!==n&&Object.defineProperty(e,"target",{configurable:!0,value:n}),Object.defineProperty(e,"currentTarget",{configurable:!0,get:()=>n||document}),d.registry&&!d.done&&(d.done=!0,document.querySelectorAll("[id^=pl-]").forEach((e=>e.remove())));null!==n;){const r=n[t];if(r&&!n.disabled){const o=n[`${t}Data`];if(void 0!==o?r.call(n,o,e):r.call(n,e),e.cancelBubble)return}n=n.host&&n.host!==n&&n.host instanceof Node?n.host:n.parentNode}}function le(e,t,n,r,o){for(d.context&&!n&&(n=[...e.childNodes]);"function"==typeof n;)n=n();if(t===n)return n;const l=typeof t,s=void 0!==r;if(e=s&&n[0]&&n[0].parentNode||e,"string"===l||"number"===l){if(d.context)return n;if("number"===l&&(t=t.toString()),s){let o=n[0];o&&3===o.nodeType?o.data=t:o=document.createTextNode(t),n=ae(e,n,r,o)}else n=""!==n&&"string"==typeof n?e.firstChild.data=t:e.textContent=t}else if(null==t||"boolean"===l){if(d.context)return n;n=ae(e,n,r)}else{if("function"===l)return A((()=>{let o=t();for(;"function"==typeof o;)o=o();n=le(e,o,n,r)})),()=>n;if(Array.isArray(t)){const l=[],i=n&&Array.isArray(n);if(se(l,t,n,o))return A((()=>n=le(e,l,n,r,!0))),()=>n;if(d.context){if(!l.length)return n;for(let e=0;e<l.length;e++)if(l[e].parentNode)return n=l}if(0===l.length){if(n=ae(e,n,r),s)return n}else i?0===n.length?ie(e,l,r):function(e,t,n){let r=n.length,o=t.length,l=r,s=0,i=0,a=t[o-1].nextSibling,c=null;for(;s<o||i<l;)if(t[s]!==n[i]){for(;t[o-1]===n[l-1];)o--,l--;if(o===s){const t=l<r?i?n[i-1].nextSibling:n[l-i]:a;for(;i<l;)e.insertBefore(n[i++],t)}else if(l===i)for(;s<o;)c&&c.has(t[s])||t[s].remove(),s++;else if(t[s]===n[l-1]&&n[i]===t[o-1]){const r=t[--o].nextSibling;e.insertBefore(n[i++],t[s++].nextSibling),e.insertBefore(n[--l],r),t[o]=n[l]}else{if(!c){c=new Map;let e=i;for(;e<l;)c.set(n[e],e++)}const r=c.get(t[s]);if(null!=r)if(i<r&&r<l){let a,u=s,d=1;for(;++u<o&&u<l&&null!=(a=c.get(t[u]))&&a===r+d;)d++;if(d>r-i){const o=t[s];for(;i<r;)e.insertBefore(n[i++],o)}else e.replaceChild(n[i++],t[s++])}else s++;else t[s++].remove()}}else s++,i++}(e,n,l):(n&&ae(e),ie(e,l));n=l}else if(t instanceof Node){if(d.context&&t.parentNode)return n=s?[t]:t;if(Array.isArray(n)){if(s)return n=ae(e,n,r,t);ae(e,n,null,t)}else null!=n&&""!==n&&e.firstChild?e.replaceChild(t,e.firstChild):e.appendChild(t);n=t}}return n}function se(e,t,n,r){let o=!1;for(let l=0,s=t.length;l<s;l++){let s=t[l],i=n&&n[l];if(s instanceof Node)e.push(s);else if(null==s||!0===s||!1===s);else if(Array.isArray(s))o=se(e,s,i)||o;else if("function"==typeof s)if(r){for(;"function"==typeof s;)s=s();o=se(e,Array.isArray(s)?s:[s],Array.isArray(i)?i:[i])||o}else e.push(s),o=!0;else{const t=String(s);i&&3===i.nodeType&&i.data===t?e.push(i):e.push(document.createTextNode(t))}}return o}function ie(e,t,n){for(let r=0,o=t.length;r<o;r++)e.insertBefore(t[r],n)}function ae(e,t,n,r){if(void 0===n)return e.textContent="";const o=r||document.createTextNode("");if(t.length){let r=!1;for(let l=t.length-1;l>=0;l--){const s=t[l];if(o!==s){const t=s.parentNode===e;r||l?t&&s.remove():t?e.replaceChild(o,s):e.insertBefore(o,n)}else r=!0}}else e.insertBefore(o,n);return[o]}function ce(e){return(t,n)=>{const{element:r}=n;return C((o=>{const l=function(e){const t=Object.keys(e),n={};for(let r=0;r<t.length;r++){const[o,l]=S(e[t[r]]);Object.defineProperty(n,t[r],{get:o,set(e){l((()=>e))}})}return n}(t);r.addPropertyChangedCallback(((e,t)=>l[e]=t)),r.addReleaseCallback((()=>{r.renderRoot.textContent="",o()}));const s=e(l,n);return re(r.renderRoot,s)}),function(e){if(e.assignedSlot&&e.assignedSlot._$owner)return e.assignedSlot._$owner;let t=e.parentNode;for(;t&&!t._$owner&&(!t.assignedSlot||!t.assignedSlot._$owner);)t=t.parentNode;return t&&t.assignedSlot?t.assignedSlot._$owner:e._$owner}(r))}}var ue=["function balanceOf(address owner) view returns (uint256)","function decimals() view returns (uint8)","function symbol() view returns (string)","function transfer(address to, uint amount) returns (bool)","function name() view returns (string)","function snapshot(address) view returns (uint, uint, uint, uint)","function totalSupply() view returns (uint256)","function totalAccounts() view returns (uint256)","function unstakingFeeOf(address) view returns (uint256)","function getStakingContract() view returns (address)","event Transfer(address indexed from, address indexed to, uint amount)"];const de=Q('<div class="rounded-lg text-center shadow-md p-4 flex flex-grow gap-3 flex-col shadow-black justify-between"><div class="text-sm"></div><div class="flex justify-center gap-1 items-baseline"><div></div><div class="text-[.5rem]"></div></div></div>'),fe=Q('<div class="flex justify-between flex-grow"><div class="text-xs"></div><div class="flex gap-1 items-baseline"><div class="text-md"></div><div class="text-[.5rem]"></div></div></div>'),ve=Q('<div class="rounded-lg text-center shadow-md p-4 flex gap-1 flex-col shadow-black"><div>ACCOUNT</div><div class="flex flex-col gap-1"></div></div>'),ge=Q('<div class="flex  flex-col shadow-md shadow-black p-4"><div class="text-center">UNSTAKING BREAKDOWN</div><div class="flex flex-grow divide-y-[1px] flex-col"><div class="flex justify-between"><div>DAYS</div><div>FEES</div></div><div class="flex flex-grow flex-col gap-1 pt-1"></div></div></div>'),pe=Q('<div class="flex flex-grow justify-between"><div></div><div class="flex items-baseline"><div></div><div class="text-[.5rem]">%</div></div></div>'),be=Q('<div class="flex gap-1 items-baseline"><div class="text-xs">FEE:</div><div class=""></div><div class="text-[.5rem]">%</div></div>'),he=Q('<div class="flex gap-1 flex-col md:flex-row flex-grow items-baseline md:justify-end"><div class="text-xs">RECEIVE:</div><div class="flex items-baseline gap-1 self-end md:self-auto"><div class="flex"></div><div class="text-[.5rem]"></div></div></div>'),ye=Q('<div class="flex  flex-col shadow-md shadow-black p-4 gap-4"><div class="flex justify-center gap-3"><button>STAKE</button><button>UNSTAKE</button></div><div class="flex flex-grow flex-col gap-1"><div><div class="flex gap-1 items-baseline"><div class="text-xs">BALANCE:</div><div></div><div class="text-[.5rem]"></div></div></div><input type="text" value=""></div><div class="flex flex-grow gap-2 items-center"><div class="flex gap-2"></div></div><button></button></div>'),ke=Q('<button class="btn btn-outline btn-xs text-white flex flex-grow">%</button>'),xe=Q("<img class=\"h-24 p-2 cursor-pointer hidden lg:block\" onclick=\"window.open('https://thexstudio.net/','_blank')\">"),me=Q('<div class="overflow-y-scroll w-full h-full lg:w-1/2 lg:left-1/4 lg:h-auto lg:top-[12%]  absolute rounded-xl flex flex-col  p-4 gap-4 shadow-md shadow-black"><div class="flex items-center"><img class="h-8"><div class="text-xl">STAKING</div></div><div class="flex flex-wrap gap-4 md:flex-nowrap"></div></div>'),we=Q("<span>TOTAL<br>STAKED</span>"),Ce=Q("<span>HOLDERS<br>STAKED</span>"),Se=Q("<span>TOTAL<br>REWARDS</span>");function _e(e,t,n){return r.utils.commify(parseFloat(r.utils.formatUnits(e,t)).toFixed(n))}const Ae=n({qrcodeModalOptions:{mobileLinks:["rainbow","metamask","argent","trust","imtoken","pillar"]},connectFirstChainId:!0}),$e=t();function Ee(e){const t={color:e.textColor,"background-color":e.foregroundColor};return(()=>{const n=de.cloneNode(!0),r=n.firstChild,o=r.nextSibling.firstChild,l=o.nextSibling;return re(r,(()=>e.label)),re(o,(()=>e.value)),re(l,(()=>e.unit)),A((e=>ne(n,t,e))),n})()}function Ne(e){return(()=>{const t=fe.cloneNode(!0),n=t.firstChild,r=n.nextSibling.firstChild,o=r.nextSibling;return re(n,(()=>e.label)),re(r,(()=>e.value)),re(o,(()=>e.unit)),t})()}function Te(e){const t={color:e.textColor,"background-color":e.foregroundColor};return(()=>{const n=ve.cloneNode(!0),r=n.firstChild.nextSibling;return re(r,z(Ne,{label:"BALANCE",get value(){return _e(e.tokenData.balance,e.tokenData.decimals,3)},get unit(){return e.tokenData.symbol}}),null),re(r,z(Ne,{label:"STAKED",get value(){return _e(e.tokenData.stakedTokens,e.tokenData.decimals,3)},get unit(){return e.tokenData.symbol}}),null),re(r,z(Ne,{label:"EARNED",get value(){return _e(e.tokenData.stakedBalance.sub(e.tokenData.stakedTokens),e.tokenData.decimals,3)},get unit(){return e.tokenData.symbol}}),null),re(r,z(Ne,{label:"ELAPSED",get value(){return(t=e.tokenData.stakedTimestamp,t.gt(0)?(Date.now()/1e3-t.toNumber())/86400:0).toFixed(0);var t},unit:"DAYS"}),null),re(r,z(Ne,{label:"UNSTAKING FEE",get value(){return _e(e.tokenData.unstakingFee,3,2)},unit:"%"}),null),A((e=>ne(n,t,e))),n})()}function De(e){const t={color:e.textColor,"background-color":e.foregroundColor};return(()=>{const n=ge.cloneNode(!0);return re(n.firstChild.nextSibling.firstChild.nextSibling,z(X,{get each(){return e.breakdown},children:e=>(()=>{const t=pe.cloneNode(!0),n=t.firstChild,r=n.nextSibling.firstChild;return re(n,(()=>`${e.period[0]} - ${e.period[1]}`)),re(r,(()=>e.fee)),t})()})),A((e=>ne(n,t,e))),n})()}function Oe(e){const t={color:e.textColor,"background-color":e.foregroundColor},[n,o]=S("STAKE"),[l,s]=S(!1),[i,a]=S(""),c=e=>{isNaN(e.target.value)&&"."!==e.target.value?(e.target.value=e.target.value.slice(0,-1),s(!0)):s(!1),a(e.target.value)},u=()=>{const t=r.utils.parseUnits(f.value,e.tokenData.decimals);"STAKE"===n()?e.tokenContract.transfer(e.tokenData.stakingContract.address,t).then((t=>{t.wait().then((()=>{e.refetch()}))})):e.tokenData.stakingContract.transfer(e.account.address,t).then((t=>{t.wait().then((()=>{e.refetch()}))}))},d=()=>"UNSTAKE"===n()&&e.tokenData.stakedBalance.eq(0)||"STAKE"===n()&&e.tokenData.balance.eq(0);let f;return(()=>{const s=ye.cloneNode(!0),a=s.firstChild,v=a.firstChild,g=v.nextSibling,p=a.nextSibling,b=p.firstChild,h=b.firstChild,y=h.firstChild.nextSibling,k=y.nextSibling,x=b.nextSibling,m=p.nextSibling,w=m.firstChild,C=m.nextSibling;v.$$click=()=>o("STAKE"),g.$$click=()=>o("UNSTAKE"),re(b,z(Y,{get when(){return"UNSTAKE"===n()},get children(){const t=be.cloneNode(!0);return re(t.firstChild.nextSibling,(()=>_e(e.tokenData.unstakingFee,3,2))),t}}),h),re(y,(()=>_e("STAKE"===n()?e.tokenData.balance:e.tokenData.stakedBalance,e.tokenData.decimals,3))),re(k,(()=>e.tokenData.symbol)),x.$$input=c;var S,_,$;return"function"==typeof f?(S=f,_=x,N((()=>S(_,$)))):f=x,re(w,z(X,{each:["25","50","75","100"],children:t=>(()=>{const o=ke.cloneNode(!0),l=o.firstChild;return o.$$click=()=>{f.value=r.utils.formatUnits(("STAKE"===n()?e.tokenData.balance:e.tokenData.stakedTokens).mul(t).div(100),e.tokenData.decimals)},re(o,t,l),o})()})),re(m,z(Y,{get when(){return"UNSTAKE"===n()},get children(){const t=he.cloneNode(!0),n=t.firstChild.nextSibling.firstChild,o=n.nextSibling;return re(n,(()=>{const t=function(e,t){return E(e,void 0,t?void 0:{equals:t})}((()=>!!i()),!0);return()=>t()?_e(r.utils.parseUnits(i(),e.tokenData.decimals).mul(10**5-e.tokenData.unstakingFee).div(10**5),e.tokenData.decimals,4):"0.00"})()),re(o,(()=>e.tokenData.symbol)),t}}),null),C.$$click=u,re(C,n),A((r=>{const o=t,i="STAKE"===n()?e.buttonColor:"inherit",a="UNSTAKE"===n()?e.buttonColor:"inherit",c="flex "+("UNSTAKE"===n()?"justify-between":"justify-end"),u="input "+(l()?"input-error input-bordered":""),f=e.textColor,p=e.foregroundColor,h=d(),y="btn btn-active border-none flex-grow "+(d()?"btn-disabled":""),k=d()?"":e.buttonColor,m=e.textColor;return r._v$=ne(s,o,r._v$),i!==r._v$2&&v.style.setProperty("color",r._v$2=i),a!==r._v$3&&g.style.setProperty("color",r._v$3=a),c!==r._v$4&&te(b,r._v$4=c),u!==r._v$5&&te(x,r._v$5=u),f!==r._v$6&&x.style.setProperty("background-color",r._v$6=f),p!==r._v$7&&x.style.setProperty("color",r._v$7=p),h!==r._v$8&&(C.disabled=r._v$8=h),y!==r._v$9&&te(C,r._v$9=y),k!==r._v$10&&C.style.setProperty("background-color",r._v$10=k),m!==r._v$11&&C.style.setProperty("color",r._v$11=m),r}),{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0,_v$6:void 0,_v$7:void 0,_v$8:void 0,_v$9:void 0,_v$10:void 0,_v$11:void 0}),s})()}function je(t){const[n,o]=S(),[l,s]=S(),[i,a]=S();var c;t.buttonStyle={color:t.textColor,"background-color":t.buttonColor},c=()=>{const n=e({wallets:[$e,Ae],chains:[{id:"0x38",token:"BNB",label:"BSC Mainnet",rpcUrl:"https://bsc-dataseed.binance.org"}]}),l=JSON.parse(localStorage.getItem("connectedWallets"));n.connectWallet(l?{autoSelect:{label:l[0],disableModals:!0}}:void 0);const i=n.state.select(),{unsubscribe:c}=i.subscribe((e=>{if(e.wallets.length){const n=new r.providers.Web3Provider(e.wallets[0].provider);o(n),localStorage.setItem("connectedWallets",JSON.stringify(e.wallets.map((e=>e.label)))),a(new r.Contract(t.tokenAddress,ue,n.getSigner())),s(e.wallets[0].accounts[0])}}));T(c)},$((()=>N(c)));const[u,{refetch:f}]=function(e,t,n){let r,o,l;2===arguments.length&&"object"==typeof t||1===arguments.length?(r=!0,o=e,l=t||{}):(r=e,o=t,l=n||{});let s=null,i=h,a=null,c=!1,u="initialValue"in l,f="function"==typeof r&&E(r);const v=new Set,[g,p]=(l.storage||S)(l.initialValue),[b,y]=S(void 0),[x,m]=S(void 0,{equals:!1}),[w,C]=S(u?"ready":"unresolved");if(d.context){let e;a=`${d.context.id}${d.context.count++}`,"initial"===l.ssrLoadFrom?i=l.initialValue:d.load&&(e=d.load(a))&&(i=e[0])}function A(e,t,n,r){return s===e&&(s=null,u=!0,e!==i&&t!==i||!l.onHydrated||queueMicrotask((()=>l.onHydrated(r,{value:t}))),i=h,$(t,n)),t}function $(e,t){K((()=>{t||p((()=>e)),y(t),C(t?"errored":"ready");for(const e of v.keys())e.decrement();v.clear()}),!1)}function T(){const e=void 0,t=g(),n=b();if(n&&!s)throw n;return k&&!k.user&&e&&_((()=>{x(),s&&(e.resolved||v.has(e)||(e.increment(),v.add(e)))})),t}function D(e=!0){if(!1!==e&&c)return;c=!1;const t=f?f():r;if(null==t||!1===t)return void A(s,N(g));const n=i!==h?i:N((()=>o(t,{value:g(),refetching:e})));return"object"==typeof n&&n&&"then"in n?(s=n,c=!0,queueMicrotask((()=>c=!1)),K((()=>{C(u?"refreshing":"pending"),m()}),!1),n.then((e=>A(n,e,void 0,t)),(e=>A(n,void 0,M(e))))):(A(s,n),n)}return Object.defineProperties(T,{state:{get:()=>w()},error:{get:()=>b()},loading:{get(){const e=w();return"pending"===e||"refreshing"===e}},latest:{get(){if(!u)return T();const e=b();if(e&&!s)throw e;return g()}}}),f?_((()=>D(!1))):D(!1),[T,{refetch:D,mutate:p}]}(l,(async e=>{const t=new r.Contract(await i().getStakingContract(),ue,n().getSigner()),o=await t.snapshot(e.address);return{name:await i().name(),symbol:await i().symbol(),decimals:await i().decimals(),balance:await i().balanceOf(e.address),stakedTokens:o[0],stakedTimestamp:o[3],unstakingFee:await t.unstakingFeeOf(e.address),stakingContract:t,stakedBalance:await t.balanceOf(e.address),totalRewardBalance:await t.balanceOf(i().address),totalStakedBalance:await t.totalSupply(),totalAccounts:await t.totalAccounts()}}),{initialValue:{name:"",symbol:"",decimals:r.constants.Zero,balance:r.constants.Zero,stakedTokens:r.constants.Zero,stakedTimestamp:r.constants.Zero,unstakingFee:r.constants.Zero,stakedContract:null,totalRewardBalance:r.constants.Zero,totalStakedBalance:r.constants.Zero,totalAccounts:r.constants.Zero,stakedBalance:r.constants.Zero}});$((()=>{if(i()&&u().stakingContract){const e=i(),t=e.filters.Transfer(null,u().stakingContract.address),n=(e,t,n,r)=>{f()};i().on(t,n),T((()=>e.off(t,n)))}}));const v=[{period:[0,29],fee:"6"},{period:[29,59],fee:"4"},{period:[60,89],fee:"2"},{period:[90,1/0],fee:"0"}];return[(()=>{const e=xe.cloneNode(!0);return ee(e,"src",TheXStudio),e})(),(()=>{const e=me.cloneNode(!0),n=e.firstChild,r=n.firstChild,o=n.nextSibling;return ee(r,"src",xLogo),re(o,z(Ee,J(t,{get label(){return we.cloneNode(!0)},get value(){return _e(u().totalStakedBalance,u().decimals,3)},get unit(){return u().symbol}})),null),re(o,z(Ee,J(t,{get label(){return Ce.cloneNode(!0)},get value(){return u().totalAccounts.toString()}})),null),re(o,z(Ee,J(t,{get label(){return Se.cloneNode(!0)},get value(){return _e(u().totalRewardBalance,u().decimals,3)},get unit(){return u().symbol}})),null),re(e,z(Te,J(t,{get tokenData(){return u()}})),null),re(e,z(De,J(t,{breakdown:v})),null),re(e,z(Oe,J(t,{get tokenData(){return u()},get tokenContract(){return i()},refetch:f,get account(){return l()}})),null),A((n=>{const r=t.backgroundColor,o=t.textColor;return r!==n._v$18&&e.style.setProperty("background-color",n._v$18=r),o!==n._v$19&&e.style.setProperty("color",n._v$19=o),n}),{_v$18:void 0,_v$19:void 0}),e})()]}!function(e,t=window.document){const n=t._$DX_DELEGATE||(t._$DX_DELEGATE=new Set);for(let r=0,o=e.length;r<o;r++){const o=e[r];n.has(o)||(n.add(o),t.addEventListener(o,oe))}}(["click","input"]),function(e,t,n){2===arguments.length&&(n=t,t={}),u(e,t)(ce(n))}("staking-widget",{"token-address":"","background-color":"","foreground-color":"","text-color":"","button-color":""},je);
